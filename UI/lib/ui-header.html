<!-- prettier-disable -->
[%#
   # This helper should be included in files which will be served as
   # top-level responses (i.e. documents on their own); this includes
   # UI/login.html, UI/logout.html, UI/main.html and various UI/setup/ pages

   # Most LedgerSMB responses are handled by the 'xhr' Dojo module, which
   # *only* needs opening and closing BODY tags to be there (for now).
   #
   # Note: To keep some comments as is and control pre or post white space
   #       chomping, we make use of '+' or '-' beside the introducers in
   #       comments like this one.
-%]
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>[% title %]</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    [%-#
        # source comment only!
        #
        # don't specify a title on the stylesheets: we want them to be
        # *persistent*
        # http://www.w3.org/TR/html401/present/styles.html#h-14.3.1
    -%]
    [%- # Keep this server side for performance purposes. If would have been
        # nicer to only depend on webpack.loaderConfig
        IF DOJO_BUILT;
          SET DOJO = "js"
              CSS = "js/css";
        ELSE;
          SET DOJO = "../node_modules"
              CSS = "css";
        END;
    -%]
    [%- IF DOJO_BUILT %]
        <%= htmlWebpackPlugin.tags.headTags %>
    [%- END %]
    <link href="[% DOJO %]/dojo/resources/dojo.css" rel="stylesheet">
    <link href="[% DOJO %]/dijit/themes/[% dojo_theme %]/[% dojo_theme %].css" rel="stylesheet">
    [%- IF form.stylesheet %]
    <link href="[% CSS %]/[% form.stylesheet %]" rel="stylesheet">
    [%- ELSIF stylesheet %]
    <link href="[% CSS %]/[% stylesheet %]" rel="stylesheet">
    [%- END %]
    [%- FOREACH s = include_stylesheet %]
    <link href="[% CSS %]/[% s %]" rel="stylesheet">
    [%- END %]
    [%- IF warn_expire %]
    window.alert("[% text('Warning:  Your password will expire in [_1]', pw_expires)%]");
    [%- END %]
    <script src="js-src/lsmb/webpack.loaderConfig.js"></script>
    <script>
        var dojoConfig = getConfig({ dojoRoot: "[% DOJO %]"});
        var lsmbConfig = {
            [%- IF USER.dateformat %]
            "dateformat": '[% USER.dateformat %]'
            [%- END %]
        };
        var loadingGif = "[% DOJO %]/dijit/icons/images/loadingAnimation.gif";
    </script>
    [%- IF DOJO_BUILT %]
        ${htmlWebpackPlugin.tags.bodyTags}
    [%- ELSE %]
        <script src="../node_modules/dojo/dojo.js"></script>
    [%- END %]
    <meta name="robots" content="noindex,nofollow" />
</head>
[% BLOCK end_html %]
</html>
[% END %]
